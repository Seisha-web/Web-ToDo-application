/* ===== Christmas Palette (GREEN + SOLID) ===== */
:root {
    --tm-icing: #DBC09A;
    /* beige */
    --tm-mistle: #65722A;
    /* olive */
    --tm-wreath: #0D3E27;
    /* deep green */
    --tm-ginger: #490200;
    /* dark brown-red */
    --tm-candy: #D61F2D;
    /* bright red */

    /* Base (light) */
    --bs-body-bg: #F4F0E6;
    /* warm paper */
    --bs-body-color: #17201b;

    --bs-border-color: rgba(13, 62, 39, .25);
    --bs-card-bg: #FFFFFF;
    /* SOLID */
    --bs-card-border-color: rgba(13, 62, 39, .18);

    --bs-link-color: var(--tm-wreath);
    --bs-link-hover-color: var(--tm-candy);

    /* Bootstrap semantic colors */
    --bs-primary: var(--tm-wreath);
    --bs-secondary: var(--tm-mistle);
    --bs-success: var(--tm-mistle);
    --bs-warning: var(--tm-icing);
    --bs-danger: var(--tm-candy);

    --bs-focus-ring-color: rgba(101, 114, 42, .22);
}

/* Dark theme: green base + icing text */
html[data-bs-theme="dark"] {
    --bs-body-bg: #06160f;
    /* near-black green */
    --bs-body-color: var(--tm-icing);
    /* beige text everywhere */

    --bs-border-color: rgba(219, 192, 154, .20);
    --bs-card-bg: #0A2A1A;
    /* SOLID dark green */
    --bs-card-border-color: rgba(219, 192, 154, .16);

    --bs-link-color: var(--tm-icing);
    --bs-link-hover-color: #fff1d7;

    --bs-primary: var(--tm-icing);
    --bs-secondary: rgba(219, 192, 154, .70);
    --bs-success: rgba(101, 114, 42, .95);
    --bs-warning: rgba(219, 192, 154, .90);
    --bs-danger: rgba(214, 31, 45, .95);

    --bs-focus-ring-color: rgba(219, 192, 154, .18);
}

/* ===== Background (more green, less haze) ===== */
body {
    background:
        radial-gradient(1000px 700px at 20% 0%, rgba(13, 62, 39, .14), transparent 60%),
        radial-gradient(900px 600px at 85% 10%, rgba(101, 114, 42, .16), transparent 60%),
        radial-gradient(700px 500px at 50% 110%, rgba(219, 192, 154, .14), transparent 60%),
        var(--bs-body-bg);
}

/* ===== Navbar: solid + green dominant ===== */
.navbar {
    background: linear-gradient(90deg, #0D3E27, #0b3522, #0D3E27) !important;
    border-bottom: 3px solid rgba(214, 31, 45, .35) !important;
}

.navbar .navbar-brand,
.navbar .nav-link,
.navbar .btn,
.navbar .input-group-text,
.navbar input {
    color: var(--tm-icing) !important;
}

.navbar .input-group-text {
    background: rgba(219, 192, 154, .12) !important;
    border: 2px solid rgba(219, 192, 154, .22) !important;
}

.navbar input {
    background: rgba(6, 22, 15, .35) !important;
    border: 2px solid rgba(219, 192, 154, .22) !important;
}

.navbar input::placeholder {
    color: rgba(219, 192, 154, .70);
}

/* ===== Cards: solid, less glass ===== */
.card {
    border: 2px solid var(--bs-card-border-color);
    box-shadow: 0 .6rem 1.4rem rgba(0, 0, 0, .08);
}

html[data-bs-theme="dark"] .card {
    box-shadow: 0 .8rem 1.7rem rgba(0, 0, 0, .22);
}

/* ===== Inputs: solid ===== */
.form-control,
.form-select,
.input-group-text {
    border-width: 2px;
    border-color: var(--bs-border-color);
}

.form-control:focus,
.form-select:focus {
    border-color: rgba(101, 114, 42, .55);
    box-shadow: 0 0 0 .25rem var(--bs-focus-ring-color);
}

/* ===== Buttons: green base + red accent ===== */
.btn-primary {
    --bs-btn-bg: var(--tm-wreath);
    --bs-btn-border-color: var(--tm-wreath);
    --bs-btn-hover-bg: #082c1c;
    --bs-btn-hover-border-color: #082c1c;
}

.btn-success {
    /* "New task" etc: make it Candy Cane */
    --bs-btn-bg: var(--tm-candy);
    --bs-btn-border-color: var(--tm-candy);
    --bs-btn-hover-bg: #be1320;
    --bs-btn-hover-border-color: #be1320;
}

.btn-outline-secondary {
    --bs-btn-color: var(--tm-icing);
    --bs-btn-border-color: rgba(219, 192, 154, .35);
    --bs-btn-hover-bg: rgba(219, 192, 154, .12);
    --bs-btn-hover-border-color: rgba(219, 192, 154, .55);
    --bs-btn-hover-color: var(--tm-icing);
}

/* ===== Tabs: active = candy, non-active = wreath outline ===== */
.nav-pills .nav-link {
    border: 2px solid rgba(13, 62, 39, .18);
    border-radius: 999px;
    color: var(--tm-wreath);
}

html[data-bs-theme="dark"] .nav-pills .nav-link {
    color: var(--tm-icing);
    border-color: rgba(219, 192, 154, .22);
}

.nav-pills .nav-link.active {
    background: var(--tm-candy);
    border-color: rgba(214, 31, 45, .65);
    color: #fff;
}

.nav-pills-sm .nav-link {
    padding: .35rem .7rem;
    font-size: .9rem;
}

/* ===== Kanban columns: solid blocks (green-ish) ===== */
.kanban-col {
    border-radius: 18px;
    padding: 12px;
    min-height: 420px;
    border: 2px solid rgba(13, 62, 39, .22);
    background: #F0F4EF;
    /* soft green panel */
}

html[data-bs-theme="dark"] .kanban-col {
    background: #072317;
    /* solid deep green panel */
    border-color: rgba(219, 192, 154, .18);
}

/* ===== Dots ===== */
.dot {
    display: inline-block;
    width: 10px;
    height: 10px;
    border-radius: 999px;
    margin-right: 8px;
}

.dot-open {
    background: var(--tm-icing);
}

.dot-progress {
    background: var(--tm-mistle);
}

.dot-done {
    background: var(--tm-candy);
}

/* ===== Task cards: solid + strong left stripe by priority ===== */
.task-card {
    border-radius: 16px;
    padding: 12px;
    cursor: pointer;
    position: relative;

    border: 2px solid rgba(13, 62, 39, .16);
    background: #FFFFFF;
    /* SOLID */
    box-shadow: 0 .35rem 1rem rgba(0, 0, 0, .07);
    transition: transform .10s ease, box-shadow .10s ease, border-color .10s ease;
}

html[data-bs-theme="dark"] .task-card {
    background: #0B2F1E;
    /* SOLID */
    border-color: rgba(219, 192, 154, .18);
    color: var(--tm-icing);
}

.task-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 .9rem 1.9rem rgba(0, 0, 0, .12);
    border-color: rgba(101, 114, 42, .35);
}

.task-desc {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

/* Priority stripe: default olive, High = candy */
.task-card::before {
    content: "";
    position: absolute;
    left: 0;
    top: 10px;
    bottom: 10px;
    width: 7px;
    border-radius: 999px;
    background: var(--tm-mistle);
}

.task-card:has(.badge.text-bg-danger)::before {
    background: var(--tm-candy);
}

/* High */
.task-card:has(.badge.text-bg-primary)::before {
    background: var(--tm-wreath);
}

/* Medium */

/* ===== Badges: stronger, less muted ===== */
.badge.text-bg-secondary {
    background: rgba(101, 114, 42, .14) !important;
    color: #1a241a !important;
    border: 1px solid rgba(101, 114, 42, .30);
}

html[data-bs-theme="dark"] .badge.text-bg-secondary {
    background: rgba(219, 192, 154, .14) !important;
    color: var(--tm-icing) !important;
    border-color: rgba(219, 192, 154, .22);
}

.badge.text-bg-warning {
    background: var(--tm-icing) !important;
    color: var(--tm-ginger) !important;
    border: 1px solid rgba(73, 2, 0, .22);
}

.badge.text-bg-success {
    background: var(--tm-mistle) !important;
    color: #fff !important;
}

.badge.text-bg-danger {
    background: var(--tm-candy) !important;
    color: #fff !important;
}

.badge.text-bg-primary {
    background: var(--tm-wreath) !important;
    color: #fff !important;
}

/* ===== Sidebar chips / activity ===== */
.user-chip {
    border: 2px solid rgba(13, 62, 39, .18);
    border-radius: 999px;
    padding: 6px 10px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 10px;
    background: #EAF2EC;
}

html[data-bs-theme="dark"] .user-chip {
    background: #062015;
    border-color: rgba(219, 192, 154, .18);
}

.activity {
    max-height: 220px;
    overflow: auto;
}

.activity .item {
    padding: 8px 0;
    border-bottom: 1px solid rgba(13, 62, 39, .16);
}

html[data-bs-theme="dark"] .activity .item {
    border-bottom-color: rgba(219, 192, 154, .16);
}

.activity .item:last-child {
    border-bottom: 0;
}

/* ===== Table header festive but green ===== */
.table thead.table-light {
    --bs-table-bg: #E5F0E8;
    border-bottom: 2px solid rgba(13, 62, 39, .18);
}

html[data-bs-theme="dark"] .table thead.table-light {
    --bs-table-bg: #062015;
    color: var(--tm-icing);
}

/* ===== Modal: dark surfaces = icing text ===== */
.modal-content {
    border: 2px solid rgba(13, 62, 39, .22);
    border-radius: 18px;
    overflow: hidden;
}

.modal-header {
    background: linear-gradient(90deg, #0D3E27, #0a2f1e);
    border-bottom: 3px solid rgba(214, 31, 45, .35);
    color: var(--tm-icing);
}

.modal-header .btn-close {
    filter: invert(1) grayscale(1);
    opacity: .9;
}

html[data-bs-theme="dark"] .modal-content {
    border-color: rgba(219, 192, 154, .18);
}

/* Checklist/comments blocks solid */
.check-item,
.comment-item {
    border: 2px solid rgba(13, 62, 39, .16);
    border-radius: 14px;
    background: #FFFFFF;
}

html[data-bs-theme="dark"] .check-item,
html[data-bs-theme="dark"] .comment-item {
    background: #062015;
    border-color: rgba(219, 192, 154, .18);
    color: var(--tm-icing);
}

/* ===== Fix: scroll inside Task modal + sticky footer ===== */
#taskModal .modal-dialog {
    height: calc(100vh - 2rem);
}

#taskModal .modal-content {
    max-height: calc(100vh - 2rem);
}

#taskModal .modal-body {
    overflow: auto;
    max-height: calc(100vh - 240px);
}

#taskModal .modal-footer {
    position: sticky;
    bottom: 0;
    background: var(--bs-card-bg, var(--bs-body-bg));
    border-top: 2px solid rgba(13, 62, 39, .18);
    z-index: 2;
}

html[data-bs-theme="dark"] #taskModal .modal-footer {
    border-top-color: rgba(219, 192, 154, .18);
}

/* Toast */
.toast {
    border: 2px solid rgba(13, 62, 39, .18);
    border-radius: 16px;
    overflow: hidden;
}

.toast-header {
    background: #E5F0E8;
    border-bottom: 2px solid rgba(214, 31, 45, .30);
}

html[data-bs-theme="dark"] .toast-header {
    background: #062015;
    color: var(--tm-icing);
}

/* Optional scrollbar */
*::-webkit-scrollbar {
    width: 10px;
    height: 10px;
}

*::-webkit-scrollbar-thumb {
    background: rgba(13, 62, 39, .28);
    border-radius: 999px;
    border: 2px solid rgba(255, 255, 255, .5);
}

html[data-bs-theme="dark"] *::-webkit-scrollbar-thumb {
    background: rgba(219, 192, 154, .18);
    border-color: rgba(6, 22, 15, .7);
}